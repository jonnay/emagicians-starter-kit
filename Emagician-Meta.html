<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-05-18 Fri 10:31 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Meta-Development</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Jonathan Arkell" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link href="https://fonts.googleapis.com/css?family=Inconsolata|Nixie+One|Taviraj:300,400" rel="stylesheet"><link href="./assets/styles/tufte-style.css" rel="stylesheet"><script src="https://use.fontawesome.com/432a2f463b.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<menu class="top"><a href="index.html"> Index </a><a href="Emagician.html"> Emagician </a><a href="Emagician-Base.html"> Base </a><a href="Emagician-Install.html"> Install </a><a href="Emagician-Meta.html"> Meta </a><a href="Interface.html"> Interface </a><a href="Programming.html"> Programming </a><a href="Text.html"> Text </a><a href="Org-Grimoire.html"> Org </a><a href="Lamp.html"> Lamp </a><a href="Journal.html"> Journal </a><a href="Snippets.html"> Snippets </a></menu><menu class="ext"><a class="dotnet" href="http://www.jonnay.net/">jonnay.net</a><a class="github" href="https://github.com/jonnay/emagicians-starter-kit">Fork on Github</a></menu>
</div>
<div id="content">
<h1 class="title">Meta-Development</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org8602223">1. Illumination‚Ä¶</a></li>
<li><a href="#orgd079241">2. <code>F3</code> Das Uberkey</a>
<ul>
<li><a href="#org6bad2d8">2.1. Meta Keys and Prefixes</a></li>
</ul>
</li>
<li><a href="#org59fa438">3. Developing</a>
<ul>
<li><a href="#org0a2766a">3.1. <span class="todo TODO">TODO</span> Capture Feature Idea</a></li>
<li><a href="#orga55902d">3.2. Emagician Helm Source</a></li>
<li><a href="#orgfad0b05">3.3. Testing</a></li>
<li><a href="#org155c0fc">3.4. Running all ERT tests</a></li>
<li><a href="#orgde46077">3.5. Test out a fresh hot load of Emagician  üí©</a></li>
<li><a href="#org208d1c0">3.6. Peering into the kit, the Emagician Agenda</a>
<ul>
<li><a href="#org3f97499">3.6.1. General agenda</a></li>
<li><a href="#org565688f">3.6.2. Find Todo Items in these files</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orge4689f2">4. Distributing</a>
<ul>
<li><a href="#orgd891f6d">4.1. Building the emagician site</a>
<ul>
<li><a href="#org6c84a78">4.1.1. Skewer!</a></li>
<li><a href="#org96c07bd">4.1.2. Publishing functions</a></li>
<li><a href="#orgc6a3394">4.1.3. Get ox-tufte</a></li>
<li><a href="#org989f0f5">4.1.4. Main publisher</a></li>
</ul>
</li>
<li><a href="#orga92c9ca">4.2. √ÜÔº≥√ûÔº•TÔº©C</a>
<ul>
<li><a href="#org9d7359a">4.2.1. Image Quilt</a></li>
<li><a href="#org5b94496">4.2.2. Styling</a></li>
<li><a href="#org1daa216">4.2.3. Old Grey Rounded Squares.  Just no</a></li>
<li><a href="#org3f9557e">4.2.4. Tufte-Plus CSS.</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgaec0752">5. Inserting text chunks</a>
<ul>
<li><a href="#org073f75b">5.1. Symbol Getter</a></li>
<li><a href="#orgbe862b5">5.2. Make some Magickal Keys</a></li>
<li><a href="#org6d22cbb">5.3. Random bunny</a>
<ul>
<li><a href="#org1c2d3ac">5.3.1. Insert a random bunny  Ôºè(‚â°„Éª x „Éª‚â°)Ôºº</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org8602223" class="outline-2">
<h2 id="org8602223"><span class="section-number-2">1</span> Illumination‚Ä¶</h2>
<div class="outline-text-2" id="text-1">
<div class="epigraph"><blockquote>
<p>
Is deliberate self modification by magic and may include spells of
Enchantment cast at oneself to repair weaknesses or increase
strengths, and Divination and Invocation performed for inspiration and
direction.
</p>

<p>
Thus all magical operations are based on the use of will, perception
and imagination, which is to say that they are all species of
Enchantment or Divination. Imagination is that which occurs when will
and perception stimulate each other.
</p>

<footer>Peter Carroll</footer></blockquote></div>
</div>
</div>

<div id="outline-container-orgd079241" class="outline-2">
<h2 id="orgd079241"><span class="section-number-2">2</span> <code>F3</code> Das Uberkey</h2>
<div class="outline-text-2" id="text-2">
<p>
The idea here is that I can press <code>f3</code>, and it becomes Anything-Emagician.
</p>

<p>
With <a href="Interface.html#orge965806">Which Key</a> it means <code>f3</code> becomes a visual menu until I really
start to learn the keystrokes.
</p>
</div>

<div id="outline-container-org6bad2d8" class="outline-3">
<h3 id="org6bad2d8"><span class="section-number-3">2.1</span> Meta Keys and Prefixes</h3>
<div class="outline-text-3" id="text-2-1">
<dl class="org-dl">
<dt>f3   </dt><dd>Open an emagician file</dd>
<dt>i    </dt><dd>Insert magickal key.  (P-crosses and poops and bunnies, oh my!)</dd>
<dt>t    </dt><dd>Show a todo list.</dd>
</dl>


<pre class="code"><code>(<span class="org-keyword">bind-keys</span> <span class="org-builtin">:prefix-map</span> emagician/meta-keymap
           <span class="org-builtin">:prefix</span> <span class="org-string">"&lt;f3&gt;"</span>
           (<span class="org-string">"&lt;f3&gt;"</span>    . emagician/helm-emagician-dir)
           (<span class="org-string">"&lt;f4&gt;"</span>    . emagician/meta/run-all-emagick-tests)
           (<span class="org-string">"&lt;f5&gt;"</span>    . emagician/meta/run-all-tests)
           (<span class="org-string">"&lt;f12&gt;"</span>   . emagician/meta/publish-changed)
           (<span class="org-string">"S-&lt;f12&gt;"</span> . emagician/meta/publish-all)
           (<span class="org-string">"a"</span>       . emagician/meta/agenda)
           (<span class="org-string">"i"</span>       . emagician/magick-keymap)
           (<span class="org-string">"t"</span>       . emagician/meta/show-todo))
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org59fa438" class="outline-2">
<h2 id="org59fa438"><span class="section-number-2">3</span> Developing</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org0a2766a" class="outline-3">
<h3 id="org0a2766a"><span class="section-number-3">3.1</span> <span class="todo TODO">TODO</span> Capture Feature Idea</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li>org capture template to capture a new feature idea</li>
</ul>
</div>
</div>
<div id="outline-container-orga55902d" class="outline-3">
<h3 id="orga55902d"><span class="section-number-3">3.2</span> Emagician Helm Source</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Helm keeps changing its interface.  For such an awesome package this is the one way in which it falls down for me.  Anything used to be so easy to configure.
</p>

<pre class="code"><code>(<span class="org-keyword">defclass</span> <span class="org-type">emagician/files-helm-source</span> (helm-source-sync helm-type-file)
  ((candidates <span class="org-builtin">:initform</span> (<span class="org-keyword">lambda</span> () (<span class="org-keyword">when</span> (file-accessible-directory-p emagician/dir)
                                            (directory-files emagician/dir t))))
   (keymap <span class="org-builtin">:initform</span> helm-generic-files-map)
   (filtered-candidate-transformer <span class="org-builtin">:initform</span> #'emagician/helm-ct-is-org-file)
   (action <span class="org-builtin">:initform</span> 'helm-type-file-actions)
   ))

(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/helm-ct-is-org-file</span> (candidates src)
  (remove-if-not
   (<span class="org-keyword">lambda</span> (c)
     (<span class="org-keyword">let</span> ((file (cdr c)))
       (<span class="org-keyword">and</span> (string= (substring file -4) <span class="org-string">".org"</span>)
            (not (string= (substring (file-name-nondirectory file)
                                     0
                                     2) <span class="org-string">".#"</span>)))))
   candidates))

(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/helm-emagician-dir</span> ()
  <span class="org-doc">"List all the org files in the Emagician dir"</span>
  (<span class="org-keyword">interactive</span>)
  (helm <span class="org-builtin">:sources</span> (helm-make-source <span class="org-string">"Files in Emagician-dir"</span> 'emagician/files-helm-source)
        <span class="org-builtin">:candidate-number-limit</span> 40
        <span class="org-builtin">:buffer</span> <span class="org-string">"*emagician-|-+-|-files*"</span>))
</code></pre>
</div>
</div>

<div id="outline-container-orgfad0b05" class="outline-3">
<h3 id="orgfad0b05"><span class="section-number-3">3.3</span> Testing</h3>
</div>
<div id="outline-container-org155c0fc" class="outline-3">
<h3 id="org155c0fc"><span class="section-number-3">3.4</span> Running all ERT tests</h3>
<div class="outline-text-3" id="text-3-4">
<pre class="code"><code>(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/meta/run-all-tests</span> ()
  (<span class="org-keyword">interactive</span>)
  (ert <span class="org-string">"emagician/"</span>))
</code></pre>
</div>
</div>

<div id="outline-container-orgde46077" class="outline-3">
<h3 id="orgde46077"><span class="section-number-3">3.5</span> Test out a fresh hot load of Emagician  üí©</h3>
<div class="outline-text-3" id="text-3-5">
<pre class="code"><code>(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/test-initialization</span> (<span class="org-type">&amp;optional</span> forms)
  (<span class="org-keyword">interactive</span>)
  (<span class="org-keyword">let*</span> ((init-file (expand-file-name <span class="org-string">"init.el"</span>
                                      emagician/dir))
         (magick-string <span class="org-string">"emagician/magick-output"</span>)
         (code `(<span class="org-keyword">condition-case</span> err
                    (<span class="org-keyword">progn</span>
                      (toggle-debug-on-error)
                      (load-file ,init-file)
                      ,(<span class="org-keyword">if</span> forms
                           `(<span class="org-keyword">progn</span> ,forms)
                         (message <span class="org-string">"No extra forms executed"</span>))
                      (message <span class="org-string">"(%s 'succcess)"</span> ,magick-string))
                  ((<span class="org-warning">error</span>)
                     (message <span class="org-string">"(%s (error (%s %s) (backtrace \"%s\")))"</span> ,magick-string (car err) (cdr err) (<span class="org-keyword">with-output-to-string</span> (backtrace)))
                     (kill-emacs 1))))
         (invocation-command (format <span class="org-string">"%s%s --no-init-file --batch --eval=\"%s\""</span>
                                     invocation-directory
                                     invocation-name
                                     (replace-regexp-in-string <span class="org-string">"\""</span>
                                                               <span class="org-string">"\\\""</span>
                                                               (format <span class="org-string">"%S"</span> code)
                                                               nil
                                                               t)))
         (result (shell-command-to-string invocation-command))
         (captured-result (substring result
                                   (<span class="org-keyword">or</span> (string-match (concat <span class="org-string">"("</span> magick-string) result)
                                       (<span class="org-warning">error</span> <span class="org-string">"Unexpected result from child emacs %s"</span> result))))
         (parsed-result (read captured-result))
         (err (assoc 'error parsed-result)))
    (message <span class="org-string">"Result: %s\n"</span>
             (message <span class="org-string">"%s\n\n\n%s"</span> (pp parsed-result) result))
    (<span class="org-keyword">if</span> err
        (<span class="org-warning">error</span> <span class="org-string">"Emagician Starter Kit Load Error:  %s: %S"</span> (cadr err) (cddr err))
      (message <span class="org-string">"Successful!"</span>))))

(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/test-initialization-with</span> (lisp)
  <span class="org-doc">"Test an Emacs initialization with a given chunk of lisp."</span>
  (<span class="org-keyword">interactive</span>  <span class="org-string">"xExecute: "</span>)
  (emagician/test-initialization lisp))
</code></pre>


<p>
This loads the starter kit as a batch and outputs the results as a message.
</p>

<pre class="code"><code>(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/test-init-through-batch</span> ()
  (<span class="org-keyword">interactive</span>)
  (message <span class="org-string">"Running New Emacs: %s"</span>
           (shell-command-to-string
            (concat invocation-directory invocation-name <span class="org-string">" "</span>
                    <span class="org-string">"--no-init-file --batch "</span>
                    <span class="org-string">"--eval='(progn (setq debug-on-error t) (setq emagician/self-test t))' "</span>
                    <span class="org-string">"--load="</span> (expand-file-name <span class="org-string">"init.el "</span> emagician/dir)
                    <span class="org-string">"--eval='' "</span>
                    <span class="org-string">"&amp;"</span>))))
</code></pre>

<p>
This does a full GUI load, outputting any results as a message.
</p>

<pre class="code"><code>(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/test-full-init</span>()
  (<span class="org-keyword">interactive</span>)
  (message (concat <span class="org-string">"Running New Emacs: "</span>
                   (shell-command-to-string
                    (concat invocation-directory invocation-name <span class="org-string">" "</span>
                            <span class="org-string">"--no-init-file "</span>
                            <span class="org-string">"--eval='(progn (setq debug-on-error t) (setq emagician/self-test t))' "</span>
                            <span class="org-string">"--load="</span> (expand-file-name <span class="org-string">"init.el "</span> emagician/dir)
                            <span class="org-string">"&amp;"</span>)))))
</code></pre>
</div>
</div>
<div id="outline-container-org208d1c0" class="outline-3">
<h3 id="org208d1c0"><span class="section-number-3">3.6</span> Peering into the kit, the Emagician Agenda</h3>
<div class="outline-text-3" id="text-3-6">
<p>
Note, this has 2 strikes.  The third agenda related strike requires a refactoring
</p>
</div>
<div id="outline-container-org3f97499" class="outline-4">
<h4 id="org3f97499"><span class="section-number-4">3.6.1</span> General agenda</h4>
<div class="outline-text-4" id="text-3-6-1">
<pre class="code"><code>(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/meta/agenda</span> ()
  <span class="org-doc">"Run agenda commands on the starter kit."</span>
  (<span class="org-keyword">interactive</span>)
  (<span class="org-keyword">let</span> ((org-directory emagician/dir)
        (org-agenda-files (list emagician/dir))
        (org-agenda-file-regexp <span class="org-string">"[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">.].+\.org$"</span>))
    (call-interactively 'org-agenda)))
</code></pre>
</div>
</div>

<div id="outline-container-org565688f" class="outline-4">
<h4 id="org565688f"><span class="section-number-4">3.6.2</span> Find Todo Items in these files</h4>
<div class="outline-text-4" id="text-3-6-2">
<pre class="code"><code>(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/meta/show-todo</span> ()
  <span class="org-doc">"Show a list of TODO actions that are on Emagicians Starter Kit."</span>
  (<span class="org-keyword">interactive</span>)
  (<span class="org-keyword">let</span> ((org-directory emagician/dir)
        (org-agenda-files (list emagician/dir))
        (org-agenda-file-regexp <span class="org-string">"[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">.].+\.org$"</span>)
        (org-agenda-overriding-header <span class="org-string">"-|-+-|- &#128048; META &#128048; -|-+-|-"</span>))
    (org-agenda nil <span class="org-string">"t"</span> nil)))
</code></pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge4689f2" class="outline-2">
<h2 id="orge4689f2"><span class="section-number-2">4</span> Distributing</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-orgd891f6d" class="outline-3">
<h3 id="orgd891f6d"><span class="section-number-3">4.1</span> Building the emagician site</h3>
<div class="outline-text-3" id="text-4-1">
</div>
<div id="outline-container-org6c84a78" class="outline-4">
<h4 id="org6c84a78"><span class="section-number-4">4.1.1</span> Skewer!</h4>
<div class="outline-text-4" id="text-4-1-1">
<p>
Use the bookmarklet to connect and you're off to the races!
</p>
</div>
</div>
<div id="outline-container-org96c07bd" class="outline-4">
<h4 id="org96c07bd"><span class="section-number-4">4.1.2</span> Publishing functions</h4>
<div class="outline-text-4" id="text-4-1-2">
<pre class="code"><code>(<span class="org-keyword">defun</span> <span class="org-function-name">org-html-publish-to-tufte-html</span> (plist filename pub-dir)
  <span class="org-doc">"Publish an org file to Tufte-styled HTML.</span>

<span class="org-doc">FILENAME is the filename of the Org file to be published.  PLIST</span>
<span class="org-doc">is the property list for the given project.  PUB-DIR is the</span>
<span class="org-doc">publishing directory.</span>

<span class="org-doc">Return output file name."</span>
  (org-publish-org-to 'tufte-html filename
                      (concat <span class="org-string">"."</span> (<span class="org-keyword">or</span> (plist-get plist <span class="org-builtin">:html-extension</span>)
                                      org-html-extension
                                      <span class="org-string">"html"</span>))
                      plist pub-dir))
</code></pre>
</div>
</div>

<div id="outline-container-orgc6a3394" class="outline-4">
<h4 id="orgc6a3394"><span class="section-number-4">4.1.3</span> Get ox-tufte</h4>
<div class="outline-text-4" id="text-4-1-3">
<pre class="code"><code>(<span class="org-keyword">require</span> '<span class="org-constant">ox-md</span>)
(<span class="org-keyword">use-package</span> <span class="org-constant">ox-tufte</span>)
</code></pre>
</div>
</div>

<div id="outline-container-org989f0f5" class="outline-4">
<h4 id="org989f0f5"><span class="section-number-4">4.1.4</span> Main publisher</h4>
<div class="outline-text-4" id="text-4-1-4">
<pre class="code"><code>(<span class="org-keyword">setq</span> org-html-htmlize-output-type 'css)
(<span class="org-keyword">setq</span> htmlize-html-charset 'utf-8)
(<span class="org-keyword">setq</span> httpd-root (expand-file-name <span class="org-string">"gh-pages"</span> emagician/dir))

(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/meta/get-menu</span> (links)
  <span class="org-doc">"Builds an html menu from every cons pair in LINKS."</span>
  (mapconcat (<span class="org-keyword">lambda</span> (pair)
               (format <span class="org-string">"&lt;a href=\"%s.html\"&gt; %s &lt;/a&gt;"</span>
                       (cdr pair)
                       (car pair)))
             links
             <span class="org-string">""</span>))

(<span class="org-keyword">ert-deftest</span> <span class="org-function-name">emagician/meta/get-menu-test</span> ()
  (<span class="org-keyword">should</span> (equal (emagician/meta/get-menu '((<span class="org-string">"a"</span> . <span class="org-string">"b"</span>)))
                 <span class="org-string">"&lt;a href=\"b.html\"&gt; a &lt;/a&gt;"</span>)))

(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/meta/publish</span> (project force async)
  (<span class="org-keyword">let*</span> ((links '((<span class="org-string">"Index"</span> . <span class="org-string">"index"</span>)
                  (<span class="org-string">"Emagician"</span> . <span class="org-string">"Emagician"</span>)
                  (<span class="org-string">"Base"</span> . <span class="org-string">"Emagician-Base"</span>)
                  (<span class="org-string">"Install"</span> . <span class="org-string">"Emagician-Install"</span>)
                  (<span class="org-string">"Meta"</span> . <span class="org-string">"Emagician-Meta"</span>)
                  (<span class="org-string">"Interface"</span> . <span class="org-string">"Interface"</span>)
                  (<span class="org-string">"Programming"</span> . <span class="org-string">"Programming"</span>)
                  (<span class="org-string">"Text"</span> . <span class="org-string">"Text"</span>)
                  (<span class="org-string">"Org"</span> . <span class="org-string">"Org-Grimoire"</span>)
                  (<span class="org-string">"Lamp"</span> . <span class="org-string">"Lamp"</span>)
                  (<span class="org-string">"Journal"</span> . <span class="org-string">"Journal"</span>)
                  (<span class="org-string">"Snippets"</span> . <span class="org-string">"Snippets"</span>)))
         (menu (concat <span class="org-string">"&lt;menu class=\"top\"&gt;"</span>
                       (emagician/meta/get-menu links)
                       <span class="org-string">"&lt;/menu&gt;"</span>))
         (ext-links (concat <span class="org-string">"&lt;menu class=\"ext\"&gt;"</span>
                            <span class="org-string">"&lt;a class=\"dotnet\" href=\"http://www.jonnay.net/\"&gt;jonnay.net&lt;/a&gt;"</span>
                            <span class="org-string">"&lt;a class=\"github\" href=\"https://github.com/jonnay/emagicians-starter-kit\"&gt;Fork on Github&lt;/a&gt;"</span>
                            <span class="org-string">"&lt;/menu&gt;"</span>))
         (emagician-html-preamble (concat menu ext-links))
         (common-publishing-settings
          `(<span class="org-builtin">:htmlized-source</span> t
            <span class="org-builtin">:makeindex</span> t
            <span class="org-builtin">:auto-sitemap</span> t
            <span class="org-builtin">:sitemap-ignore-case</span> t
            <span class="org-builtin">:html-html5-fancy</span> t
            <span class="org-builtin">:headline-levels</span> 5
            <span class="org-builtin">:publishing-directory</span> ,(expand-file-name <span class="org-string">"gh-pages"</span> emagician/dir)
            <span class="org-builtin">:html-preamble</span> ,emagician-html-preamble
            <span class="org-builtin">:publishing-function</span> org-html-publish-to-tufte-html
            <span class="org-builtin">:html-head-extra</span> <span class="org-string">"&lt;link href=\"https://fonts.googleapis.com/css?family=Inconsolata|Nixie+One|Taviraj:300,400\" rel=\"stylesheet\"&gt;&lt;link href=\"./assets/styles/tufte-style.css\" rel=\"stylesheet\"&gt;&lt;script src=\"https://use.fontawesome.com/432a2f463b.js\"&gt;&lt;/script&gt;"</span>))
         (org-publish-project-alist
          `((<span class="org-string">"emagician"</span> <span class="org-builtin">:components</span> (<span class="org-string">"emagician-assets"</span> <span class="org-string">"emagician-org"</span>))
            (<span class="org-string">"emagician-test"</span> <span class="org-builtin">:components</span> (<span class="org-string">"emagician-assets"</span> <span class="org-string">"emagician-org-test"</span>))
            (<span class="org-string">"emagician-assets"</span>
             <span class="org-builtin">:base-directory</span> ,(expand-file-name <span class="org-string">"assets/"</span> emagician/dir)
             <span class="org-builtin">:recursive</span> t
             <span class="org-builtin">:base-extension</span> <span class="org-string">"css</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">js</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">png</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">jpg</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">gif</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">pdf</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">mp3</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">svg</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">eot</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">tff</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">woff"</span>
             <span class="org-builtin">:publishing-directory</span> ,(expand-file-name <span class="org-string">"gh-pages/assets"</span> emagician/dir)
             <span class="org-builtin">:publishing-function</span> org-publish-attachment)
            (<span class="org-string">"emagician-org"</span>
             <span class="org-builtin">:base-directory</span> ,emagician/dir
             <span class="org-builtin">:base-extension</span> <span class="org-string">"org"</span>
             ,@common-publishing-settings
             )
            (<span class="org-string">"emagician-org-test"</span>
             <span class="org-builtin">:base-directory</span> ,emagician/dir
             <span class="org-builtin">:base-extension</span> <span class="org-string">""</span>
             <span class="org-builtin">:exlcude</span> <span class="org-string">".*"</span>
             <span class="org-builtin">:include</span> (<span class="org-string">"Index.org"</span> <span class="org-string">"Emagician.org"</span>)
             ,@common-publishing-settings
             )
            )))
    (org-publish project force async)))

(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/meta/publish-test</span> ()
  (<span class="org-keyword">interactive</span>)
  (emagician/meta/publish <span class="org-string">"emagician-test"</span> nil nil))

(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/meta/publish-changed</span> ()
  (<span class="org-keyword">interactive</span>)
  (emagician/meta/publish <span class="org-string">"emagician"</span> nil nil))

(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/meta/publish-all</span> ()
  (<span class="org-keyword">interactive</span>)
  (emagician/meta/publish <span class="org-string">"emagician"</span> t nil))

(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/meta/publish-assets</span> ()
  (<span class="org-keyword">interactive</span>)
  (emagician/meta/publish <span class="org-string">"emagician-assets"</span> t nil))

</code></pre>
</div>
</div>
</div>

<div id="outline-container-orga92c9ca" class="outline-3">
<h3 id="orga92c9ca"><span class="section-number-3">4.2</span> √ÜÔº≥√ûÔº•TÔº©C</h3>
<div class="outline-text-3" id="text-4-2">
<p>
<label for="1" class="margin-toggle">&#8853;</label><input type="checkbox" id="1" class="margin-toggle"/><span class="marginnote"><img src="./assets/images/tome-quilt/grimoire.jpg" alt="grimoire.jpg" /></span>
The current
√ÜÔº≥√ûÔº•TÔº©C still needs a lot of work.  It's much further ahead
than a raw text export but nowhere near what I want.
</p>

<p>
Using the Tufte CSS along with dakrone's awesome exporter. 
</p>

<p>
While I am not a fan of Tufte's √ÜÔº≥√ûÔº•TÔº©C, there is no denying his design skill. 
</p>

<p>
His √ÜÔº≥√ûÔº•TÔº©C blows mine out of the water. 
</p>

<ul class="org-ul">
<li><a href="https://github.com/dakrone/ox-tufte">https://github.com/dakrone/ox-tufte</a></li>
<li><a href="https://github.com/melpa/melpa/pull/4201">https://github.com/melpa/melpa/pull/4201</a></li>
<li><a href="https://edwardtufte.github.io/tufte-css/">https://edwardtufte.github.io/tufte-css/</a></li>
</ul>
</div>

<div id="outline-container-org9d7359a" class="outline-4">
<h4 id="org9d7359a"><span class="section-number-4">4.2.1</span> Image Quilt</h4>
<div class="outline-text-4" id="text-4-2-1">
<pre class="code"><code>(concat <span class="org-string">"&lt;div class=\"my-quilt\"&gt;\n"</span>
        (mapconcat (<span class="org-keyword">lambda</span> (f)
                     (format <span class="org-string">"  &lt;img src=\"./assets/images/tome-quilt/%s\" /&gt;\n"</span> f))
                   (directory-files (expand-file-name <span class="org-string">"assets/images/tome-quilt"</span>
                                                      emagician/dir)
                                    nil
                                    (regexp-opt '(<span class="org-string">"jpg"</span> <span class="org-string">"jpeg"</span> <span class="org-string">"png"</span> <span class="org-string">"gif"</span>)))
                   <span class="org-string">""</span>)
        <span class="org-string">"&lt;/div&gt;\n"</span>)
</code></pre>

<div class="my-quilt">
  <img src="./assets/images/tome-quilt/Grimoire-Pages-by-Reighnhell.png" />
  <img src="./assets/images/tome-quilt/Lovecraft-Grimoire-Page-by-AzrielMordecai.jpg" />
  <img src="./assets/images/tome-quilt/codex_seraphinianus8.jpg" />
  <img src="./assets/images/tome-quilt/dresden-codex.jpg" />
  <img src="./assets/images/tome-quilt/grimoire.jpg" />
  <img src="./assets/images/tome-quilt/psychonaught.jpg" />
</div>
<div class="HTML">
<p>
&lt;div class="my-quilt"&gt;
  &lt;img src="./assets/images/tome-quilt/Grimoire-Pages-by-Reighnhell.png" /&gt;
  &lt;img src="./assets/images/tome-quilt/Lovecraft-Grimoire-Page-by-AzrielMordecai.jpg" /&gt;
  &lt;img src="./assets/images/tome-quilt/codex<sub>seraphinianus8.jpg</sub>" /&gt;
  &lt;img src="./assets/images/tome-quilt/dresden-codex.jpg" /&gt;
  &lt;img src="./assets/images/tome-quilt/grimoire.jpg" /&gt;
  &lt;img src="./assets/images/tome-quilt/psychonaught.jpg" /&gt;
&lt;/div&gt;
</p>

</div>
</div>
</div>

<div id="outline-container-org5b94496" class="outline-4">
<h4 id="org5b94496"><span class="section-number-4">4.2.2</span> Styling</h4>
<div class="outline-text-4" id="text-4-2-2">
<pre class="code"><code>(emagician/expect-dir <span class="org-string">"assets/styles"</span>)
</code></pre>
</div>
</div>

<div id="outline-container-org1daa216" class="outline-4">
<h4 id="org1daa216"><span class="section-number-4">4.2.3</span> Old Grey Rounded Squares.  Just no</h4>
<div class="outline-text-4" id="text-4-2-3">
<p>
The thi.ng/org-spec is a good basis to build off of.<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/><span class="sidenote">
<a href="https://github.com/thi-ng/org-spec">https://github.com/thi-ng/org-spec</a>
</span>
</p>

<p>
Things I like:
</p>
<ul class="org-ul">
<li>The source blocks, properties blocks, etc all have little outlines</li>
<li>Tags displayed nicely.</li>
<li>Outbound links displayed differently.</li>
<li>Table of contents.</li>
</ul>

<p>
Things I don't like:
</p>
<ul class="org-ul">
<li>√ÜÔº≥√ûÔº•TÔº©C &#x2026; or lack thereof.</li>
</ul>

<p>
I've started to trim the fat off of that CSS and focus on the elements I enjoy.
</p>

<pre class="code"><code><span class="org-css-selector">a[name]:before </span>{
    <span class="org-css-property">content</span>: <span class="org-string">"#"</span> attr(name);
}

<span class="org-css-selector">a[name]:after </span>{
    <span class="org-css-property">content</span>: <span class="org-string">""</span>;
}

<span class="org-css-selector">a[href^=</span><span class="org-string">"http"</span><span class="org-css-selector">]:after </span>{
    <span class="org-css-property">content</span>: <span class="org-string">"\21F4]]"</span>;
    <span class="org-css-property">padding-left</span>: 0.2em;
}

<span class="org-css-selector">pre </span>{
    <span class="org-css-property">background-color</span>: <span class="custom-7"><span class="custom-8">#f8f8f8</span></span>;
    <span class="org-css-property">background-size</span>: 8px 8px;
    <span class="org-css-property">background-image</span>: linear-gradient(135deg, transparent 25%, <span class="custom-5"><span class="custom-6">rgba(0, 0, 0, 0.02)</span></span> 25%, <span class="custom-5"><span class="custom-6">rgba(0, 0, 0, 0.02)</span></span> 50%, transparent 50%, transparent 75%, <span class="custom-5"><span class="custom-6">rgba(0, 0, 0, 0.02)</span></span> 75%, <span class="custom-5"><span class="custom-6">rgba(0, 0, 0, 0.02)</span></span>);
    <span class="org-css-property">overflow</span>: auto <span class="org-builtin">!important</span>;
}

<span class="org-css-selector">pre.src:before </span>{
    <span class="org-css-property">display</span>: block;
    <span class="org-css-property">position</span>: absolute;
    <span class="org-css-property">background-color</span>: <span class="custom-4"><span class="custom-8">#ccccd0</span></span>;
    <span class="org-css-property">top</span>: 0;
    <span class="org-css-property">right</span>: 0;
    <span class="org-css-property">padding</span>: 0.25em 0.5em;
    <span class="org-css-property">border-bottom-left-radius</span>: 8px;
    <span class="org-css-property">border</span>: 0;
    <span class="org-css-property">color</span>: <span class="custom-3"><span class="custom-8">white</span></span>;
    <span class="org-css-property">font-size</span>: 80%;
}

<span class="org-css-selector">pre.src-sh:before </span>{
    <span class="org-css-property">content</span>: <span class="org-string">"SH"</span>;
}

<span class="org-css-selector">pre.src-javascript:before </span>{
    <span class="org-css-property">content</span>: <span class="org-string">"JS"</span>;
}

<span class="org-css-selector">pre.src-emacs-lisp:before </span>{
    <span class="org-css-property">content</span>: <span class="org-string">"Emacs-Lisp"</span>;
}

<span class="org-css-selector">pre.src-c:before </span>{
    <span class="org-css-property">content</span>: <span class="org-string">"C"</span>;
}

<span class="org-css-selector">div.figure </span>{
    <span class="org-css-property">font-size</span>: 0.85em;
}

<span class="org-css-selector">.tag </span>{
    <span class="org-css-property">font-family</span>: <span class="org-string">"Roboto Slab"</span>, Helvetica, Arial, sans-serif;
    <span class="org-css-property">font-size</span>: 11px;
    <span class="org-css-property">font-weight</span>: normal;
    <span class="org-css-property">float</span>: right;
    <span class="org-css-property">margin-top</span>: 1em;
    <span class="org-css-property">background</span>: transparent;
}

<span class="org-css-selector">.tag span </span>{
    <span class="org-css-property">background</span>: <span class="custom-2"><span class="custom-8">#ccc</span></span>;
    <span class="org-css-property">padding</span>: 0 0.5em;
    <span class="org-css-property">border-radius</span>: 0.2em;
    <span class="org-css-property">color</span>: <span class="custom-3"><span class="custom-8">white</span></span>;
}

<span class="org-css-selector">.todo, .done </span>{
    <span class="org-css-property">font-family</span>: <span class="org-string">"Roboto Slab"</span>, Helvetica, Arial, sans-serif;
    <span class="org-css-property">font-weight</span>: normal;
    <span class="org-css-property">padding</span>: 0 0.25em;
    <span class="org-css-property">border-radius</span>: 0.2em;
}

<span class="org-css-selector">.todo </span>{
    <span class="org-css-property">background</span>: <span class="custom-1"><span class="custom-6">#f04</span></span>;
    <span class="org-css-property">color</span>: <span class="custom-3"><span class="custom-8">white</span></span>;
}

<span class="org-css-selector">.done </span>{
    <span class="org-css-property">background</span>: <span class="custom"><span class="custom-8">#5f7</span></span>;
    <span class="org-css-property">color</span>: <span class="custom-3"><span class="custom-8">white</span></span>;
}
</code></pre>
</div>
</div>

<div id="outline-container-org3f9557e" class="outline-4">
<h4 id="org3f9557e"><span class="section-number-4">4.2.4</span> Tufte-Plus CSS.</h4>
<div class="outline-text-4" id="text-4-2-4">
<pre class="code"><code><span class="org-builtin">@import</span> url(<span class="org-string">"tufte.css"</span>);

<span class="org-css-selector">h4 </span>{
  <span class="org-css-property">font-style</span>: italic;
  <span class="org-css-property">font-weight</span>: 400;
  <span class="org-css-property">font-size</span>: 1.7rem;
  <span class="org-css-property">margin-top</span>: 1rem;
  <span class="org-css-property">margin-bottom</span>: 0;
  <span class="org-css-property">line-height</span>: 1;
}

<span class="org-css-selector">.title </span>{ <span class="org-css-property">text-align</span>: left; }

<span class="org-css-selector">.my-quilt </span>{
  <span class="org-css-property">margin</span>: 4rem 0;
  <span class="org-css-property">text-align</span>: center;
  <span class="org-css-property">font-size</span>: 0;
}

<span class="org-css-selector">.my-quilt img </span>{
  <span class="org-css-property">max-height</span>: 200px;
  <span class="org-css-property">min-height</span>: 200px;
  <span class="org-css-property">display</span>: inline-block;
}

<span class="org-css-selector">pre.code </span>{
  <span class="org-css-property">font-size</span>: 60%;
  <span class="org-css-property">transition</span>: width 0.25s ease-in, font-size 0.25s ease-in;
}

<span class="org-css-selector">pre.code:hover </span>{
  <span class="org-css-property">width</span>: 90%;
  <span class="org-css-property">font-size</span>: 85%;
}

<span class="org-css-selector">.tag:before </span>{
  <span class="org-css-property">font-family</span>: FontAwesome;
  <span class="org-css-property">content</span>: <span class="org-string">"\f02b"</span>;
  <span class="org-css-property">padding-right</span>: 0.5rem;
}

<span class="org-css-selector">.tag </span>{
  <span class="org-css-property">padding</span>: 0.3rem;
  <span class="org-css-property">float</span>: right;
  <span class="org-css-property">background-image</span>: linear-gradient(90deg, <span class="custom-20"><span class="custom-21">hsl(19, 27%, 86%)</span></span>, <span class="custom-19"><span class="custom-21">hsl(19, 28%, 84%)</span></span>);
  <span class="org-css-property">border-radius</span>: 0.3em;
  <span class="org-css-property">border</span>: 1px solid <span class="custom-18"><span class="custom-21">hsl(19, 28%, 70%)</span></span>;
  <span class="org-css-property">box-shadow</span>: 4px 4px 2px <span class="custom-16"><span class="custom-17">hsla(0, 0%, 0%, 0.2)</span></span>;
}

<span class="org-css-selector">.tag span </span>{
  <span class="org-css-property">border-radius</span>: 0.2em;
}

<span class="org-css-selector">span.org-string </span>{
  <span class="org-css-property">color</span>: <span class="custom-15"><span class="custom-17">hsl(30, 90%, 40%)</span></span>;
}

<span class="org-css-selector">span.org-keyword </span>{
  <span class="org-css-property">color</span>: <span class="custom-14"><span class="custom-17">hsl(0, 100%, 35%)</span></span>;
}

<span class="org-css-selector">span.org-variable-name </span>{
  <span class="org-css-property">color</span>: <span class="custom-13"><span class="custom-17">hsl(0, 100%, 50%)</span></span>;
}

<span class="org-css-selector">span.org-comment, span.org-comment-delimiter </span>{
  <span class="org-css-property">color</span>: <span class="custom-12"><span class="custom-21">#999</span></span>;
}

<span class="org-css-selector">span.org-rainbow-delimiters-depth-1, span.org-rainbow-delimiters-depth-5 </span>{
  <span class="org-css-property">color</span>: <span class="custom-11"><span class="custom-17">#666</span></span>;
}

<span class="org-css-selector">span.org-rainbow-delimiters-depth-2, span.org-rainbow-delimiters-depth-6 </span>{
  <span class="org-css-property">color</span>: <span class="custom-10"><span class="custom-21">#888</span></span>;
}

<span class="org-css-selector">span.org-rainbow-delimiters-depth-3, span.org-rainbow-delimiters-depth-7 </span>{
  <span class="org-css-property">color</span>: <span class="custom-9"><span class="custom-21">#aaa</span></span>;
}

<span class="org-css-selector">span.org-rainbow-delimiters-depth-4, span.org-rainbow-delimiters-depth-8 </span>{
  <span class="org-css-property">color</span>: <span class="custom-8"><span class="custom-21">#ccc</span></span>;
}

<span class="org-css-selector">#footnotes </span>{
  <span class="org-css-property">display</span>: none;
}


<span class="org-builtin">@media</span> screen and (min-device-width: 1000px) {
  <span class="org-css-selector">h1.title </span>{
    <span class="org-css-property">margin-left</span>: 260px;
  }

  <span class="org-css-selector">#preamble menu a </span>{
    <span class="org-css-property">text-transform</span>: uppercase;
    <span class="org-css-property">font-size</span>: 0.75rem;
    <span class="org-css-property">display</span>: inline-block;
    <span class="org-css-property">margin-right</span>: 10px;
  }

  <span class="org-css-selector">#preamble menu.top </span>{
    <span class="org-css-property">position</span>: absolute;
    <span class="org-css-property">top</span>: -11px;
    <span class="org-css-property">left</span>: 238px;
  }


  <span class="org-css-selector">menu.top a:before </span>{
    <span class="org-css-property">color</span>: <span class="custom-7"><span class="custom-17">hsl(0, 96%, 40%)</span></span>;
    <span class="org-css-property">content</span>: <span class="org-string">"&#9957;"</span>;
  }


  <span class="org-css-selector">#preamble menu.ext </span>{
    <span class="org-css-property">position</span>: absolute;
    <span class="org-css-property">top</span>: -11px;
    <span class="org-css-property">right</span>: 0;
  }


  <span class="org-css-selector">menu.ext a.dotnet </span>{
    <span class="org-css-property">display</span>: inline-block;
    <span class="org-css-property">background-image</span>: url<span class="org-default">(</span><span class="org-string">../images/burning-bunny-icon.png</span><span class="org-default">)</span>;
    <span class="org-css-property">background-repeat</span>: no-repeat;
    <span class="org-css-property">padding-left</span>: 20px;
    <span class="org-css-property">background-position</span>: 0 0;
    <span class="org-css-property">background-size</span>: contain;
  }

  <span class="org-css-selector">menu.ext a.github </span>{
    <span class="org-css-property">padding-left</span>: 0;
  }

  <span class="org-css-selector">menu.ext a.github:before </span>{
    <span class="org-css-property">font-family</span>: FontAwesome;
    <span class="org-css-property">content</span>: <span class="org-string">"&#61715;"</span>;
    <span class="org-css-property">padding-right</span>: 3px;
    <span class="org-css-property">color</span>: <span class="custom-16"><span class="custom-17">hsla(0,0%,0%,0.4)</span></span>;
  }

  <span class="org-css-selector">#table-of-contents </span>{
    <span class="org-css-property">position</span>: fixed;
    <span class="org-css-property">top</span>: 0;
    <span class="org-css-property">left</span>: 0;
    <span class="org-css-property">padding</span>: 1ex 1em 5em 2em;
    <span class="org-css-property">border-right</span>: 1px solid <span class="custom-6"><span class="custom-21">#bbb</span></span>;
    <span class="org-css-property">box-shadow</span>: 3px 0 3px <span class="custom-5"><span class="custom-17">hsla(0,30%,50%,0.1)</span></span>,
    5px 0 5px <span class="custom-5"><span class="custom-17">hsla(0,30%,50%,0.1)</span></span>,
    8px 0 8px <span class="custom-5"><span class="custom-17">hsla(0,30%,50%,0.1)</span></span>,
    13px 0 13px <span class="custom-5"><span class="custom-17">hsla(0,30%,50%,0.1)</span></span>,
    inset -3px 0 3px <span class="custom-5"><span class="custom-17">hsla(0,30%,50%,0.1)</span></span>,
    inset -5px 0 5px <span class="custom-5"><span class="custom-17">hsla(0,30%,50%,0.1)</span></span>,
    inset -8px 0 8px <span class="custom-5"><span class="custom-17">hsla(0,30%,50%,0.1)</span></span>,
    inset -13px 0 13px <span class="custom-5"><span class="custom-17">hsla(0,30%,50%,0.1)</span></span>,
    inset 8px 0 8px <span class="custom-16"><span class="custom-17">hsla(0,0%,0%,0.1)</span></span>,
    inset 13px 0 13px <span class="custom-16"><span class="custom-17">hsla(0,0%,0%,0.1)</span></span>;
    <span class="org-css-property">width</span>: 220px;
    <span class="org-css-property">height</span>: 100vh;
    <span class="org-css-property">font-size</span>: 11px;
    <span class="org-css-property">background</span>: <span class="custom-4"><span class="custom-21">hsl(43, 29%, 92%)</span></span>;
    <span class="org-css-property">overflow</span>: auto;
  }

  <span class="org-css-selector">#table-of-contents h2,</span>
<span class="org-css-selector">  #table-of-contents ol,</span>
<span class="org-css-selector">  #table-of-contents ul</span>{
    <span class="org-css-property">font-size</span>: 1rem;
    <span class="org-css-property">width</span>: 95%;
    <span class="org-css-property">margin-bottom</span>: 0.5rem;
  }

  #table-of-contents h2:before,
  <span class="org-css-selector">#table-of-contents h2:after </span>{
    <span class="org-css-property">color</span>: <span class="custom-7"><span class="custom-17">hsl(0, 96%, 40%)</span></span>;
    <span class="org-css-property">content</span>: <span class="org-string">"&#9957;"</span>;
  }

  <span class="org-css-selector">#table-of-contents li </span>{
    <span class="org-css-property">padding-top</span>: 0.2rem;
    <span class="org-css-property">padding-bottom</span>: 0.3rem;
    <span class="org-css-property">list-style-type</span>: none;
  }

  <span class="org-css-selector">#table-of-contents li:before </span>{
    <span class="org-css-property">color</span>: <span class="custom-7"><span class="custom-17">hsl(0, 96%, 40%)</span></span>;
    <span class="org-css-property">content</span>: <span class="org-string">"&#9957;"</span>;
    <span class="org-css-property">padding-right</span>: 0.5rem;
    <span class="org-css-property">margin-left</span>: -1rem;
  }

  <span class="org-css-selector">#table-of-contents ul&gt;li&gt;ul&gt;li&gt;ul&gt;li </span>{
    <span class="org-css-property">font-size</span>: 80%;
    <span class="org-css-property">display</span>: block;
  }

  <span class="org-css-selector">#table-of-contents&gt;h2 </span>{
    <span class="org-css-property">margin-top</span>: 1rem;
    <span class="org-css-property">font-size</span>: 1.5rem;
    <span class="org-css-property">color</span>: <span class="custom-3"><span class="custom-17">hsl(0, 96%, 35%)</span></span>;
    <span class="org-css-property">text-shadow</span>: 0.03em 0 <span class="custom-2"><span class="custom-21">hsl(60, 100%, 99%)</span></span>,
    -0.03em 0 <span class="custom-2"><span class="custom-21">hsl(60, 100%, 99%)</span></span>,
    0 0.03em <span class="custom-2"><span class="custom-21">hsl(60, 100%, 99%)</span></span>,
    0 -0.03em <span class="custom-2"><span class="custom-21">hsl(60, 100%, 99%)</span></span>,
    0.06em 0 <span class="custom-2"><span class="custom-21">hsl(60, 100%, 99%)</span></span>,
    -0.06em 0 <span class="custom-2"><span class="custom-21">hsl(60, 100%, 99%)</span></span>,
    0.09em 0 <span class="custom-2"><span class="custom-21">hsl(60, 100%, 99%)</span></span>,
    -0.09em 0 <span class="custom-2"><span class="custom-21">hsl(60, 100%, 99%)</span></span>,
    0.12em 0 <span class="custom-2"><span class="custom-21">hsl(60, 100%, 99%)</span></span>,
    -0.12em 0 <span class="custom-2"><span class="custom-21">hsl(60, 100%, 99%)</span></span>,
    0.15em 0 <span class="custom-2"><span class="custom-21">hsl(60, 100%, 99%)</span></span>,
    -0.15em 0 <span class="custom-2"><span class="custom-21">hsl(60, 100%, 99%)</span></span>;
  }

  <span class="org-css-selector">#table-of-contents code </span>{
    <span class="org-css-property">font-size</span>: 12px;
  }

  <span class="org-css-selector">#table-of-contents a </span>{
    <span class="org-css-property">color</span>: <span class="custom-1"><span class="custom-17">hsl(0, 96%, 30%)</span></span>;
    <span class="org-css-property">background</span>: linear-gradient(<span class="custom"><span class="custom-21">hsl(60, 37%, 88%)</span></span>, <span class="custom"><span class="custom-21">hsl(60, 37%, 88%)</span></span>),
    linear-gradient(<span class="custom"><span class="custom-21">hsl(60, 37%, 88%)</span></span>, <span class="custom"><span class="custom-21">hsl(60, 37%, 88%)</span></span>);
  }

  <span class="org-css-selector">#table-of-contents .tag </span>{
    <span class="org-css-property">display</span>: none;
  }

  <span class="org-css-selector">.tiny-box </span>{
    <span class="org-css-property">float</span>: right;
    <span class="org-css-property">clear</span>: right;
    <span class="org-css-property">margin-right</span>: -60%;
    <span class="org-css-property">width</span>: 50%;
    <span class="org-css-property">margin-top</span>: 0;
    <span class="org-css-property">margin-bottom</span>: 0;
    <span class="org-css-property">font-size</span>: 1.1rem;
    <span class="org-css-property">line-height</span>: 1.3;
    <span class="org-css-property">vertical-align</span>: baseline;
    <span class="org-css-property">position</span>: relative;
  }

  <span class="org-css-selector">.code </span>{
    <span class="org-css-property">font-family</span>: <span class="org-string">"Source Code Pro"</span>, <span class="org-string">"Fira Code"</span>, Consolas, Inconsolata, <span class="org-string">"Liberation Mono"</span>, Menlo, Courier, monospace
  }

  <span class="org-css-selector">#footnotes </span>{
    <span class="org-css-property">margin-left</span>: 280px;
    <span class="org-css-property">max-width</span>: 960px;
  }
  <span class="org-css-selector">#postamble </span>{
    <span class="org-css-property">margin-left</span>: 230px;
    <span class="org-css-property">margin-top</span>: 0;
    <span class="org-css-property">padding-top</span>: 30px;
  }
  <span class="org-css-selector">div.outline-2 </span>{
    <span class="org-css-property">margin-left</span>: 230px;
    <span class="org-css-property">max-width</span>: 960px;
  }
}

<span class="org-builtin">@media</span> only screen and (max-device-width: 768px) {
  <span class="org-css-selector">body </span>{
    <span class="org-css-property">padding-left</span>: 30px;
  }

  <span class="org-css-selector">#table-of-contents </span>{
    <span class="org-css-property">display</span>: none;
  }
}

<span class="org-builtin">@media</span> print {
  <span class="org-css-selector">#preamble </span>{
    <span class="org-css-property">display</span>: none;
  }

  <span class="org-css-selector">#table-of-contents </span>{
    <span class="org-css-property">display</span>: block;
    <span class="org-css-property">width</span>: auto;
    <span class="org-css-property">background</span>: none;
    <span class="org-css-property">box-shadow</span>: none;
  }

  <span class="org-css-selector">#table-of-contents&gt;ul&gt;li&gt;ul </span>{
    <span class="org-css-property">display</span>: none;
  }
}
</code></pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgaec0752" class="outline-2">
<h2 id="orgaec0752"><span class="section-number-2">5</span> Inserting text chunks</h2>
<div class="outline-text-2" id="text-5">
<p>
In 2016 I participated in GISHWHES.  One of the items was to make an animation on a Commodore-64.<label for="2" class="margin-toggle sidenote-number"></label><input type="checkbox" id="2" class="margin-toggle"/><span class="sidenote">
The Greatest International Scavenger Hunt the World Has Ever Seen.  This is a yearly event with up to 10,000 people participating.  It lasts for a week long and participants are split into teams of ~13 people.  Some of the items are silly (go to the dentist and get dental work done while a string quartet performs), some are charitable (go to a nursing home and read to one of the residents while wearing a pirate costume).  More information on <a href="https://www.youtube.com/watch?v=SxeusMu7FuY">I'm Jonnay Season 9 Season 2 - TAZ</a>.
</span>
</p>

<p>
I think I ended up getting inspired by the keyboard.
</p>



<div class="figure">
<p><img src="assets/images/Commodore.gif" alt="Commodore.gif" />
</p>
</div>
</div>

<div id="outline-container-org073f75b" class="outline-3">
<h3 id="org073f75b"><span class="section-number-3">5.1</span> Symbol Getter</h3>
<div class="outline-text-3" id="text-5-1">
<pre class="code"><code>(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/meta/get-insert-symbol</span> (text)
  <span class="org-doc">"Returns a insert-symbol for the chunk of text"</span>
  (intern (format <span class="org-string">"emagician/insert/%s"</span> text)))
</code></pre>
</div>
</div>

<div id="outline-container-orgbe862b5" class="outline-3">
<h3 id="orgbe862b5"><span class="section-number-3">5.2</span> Make some Magickal Keys</h3>
<div class="outline-text-3" id="text-5-2">
<p>
The next chunk makes a keymap and starts defining and binding insert functions on it.
</p>

<pre class="code"><code>(define-prefix-command 'emagician/magick-keymap)
(mapcar (<span class="org-keyword">lambda</span> (pair)
          (fset (emagician/meta/get-insert-symbol (cdr pair))
                (eval `(<span class="org-keyword">lambda</span> () (<span class="org-keyword">interactive</span>) (insert ,(cdr pair)))))
          (define-key emagician/magick-keymap
            (car pair)
            (emagician/meta/get-insert-symbol (cdr pair))))
        '((<span class="org-string">"a"</span> . <span class="org-string">"&#198;&#65331;&#222;&#65317;T&#65321;C"</span>)
          (<span class="org-string">"b"</span> . <span class="org-string">"&#128048;"</span>)
          (<span class="org-string">"e"</span> . <span class="org-string">"&#128138;"</span>)        <span class="org-comment-delimiter">; </span><span class="org-comment">Hah, it's a joke son.</span>
          (<span class="org-string">"h"</span> . <span class="org-string">"&#5461;(&#5147;)&#5463;"</span>)  <span class="org-comment-delimiter">; </span><span class="org-comment">&#9488;(&#5147;)&#9484;</span>
          (<span class="org-string">"m"</span> . <span class="org-string">"&#127812;"</span>)
          (<span class="org-string">"p"</span> . <span class="org-string">"-|-+-|-"</span>)
          (<span class="org-string">"s"</span> . <span class="org-string">"&#128169;"</span>)
          (<span class="org-string">"S"</span> . <span class="org-string">"&#175;\\_(&#12484;)_/&#175;"</span>)
          (<span class="org-string">"t"</span> . <span class="org-string">"&#128701;"</span>)))
</code></pre>
</div>
</div>

<div id="outline-container-org6d22cbb" class="outline-3">
<h3 id="org6d22cbb"><span class="section-number-3">5.3</span> Random bunny</h3>
<div class="outline-text-3" id="text-5-3">
<pre class="code"><code>(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/random-bunny</span> ()
  (<span class="org-keyword">let</span> ((bunnies '(
           <span class="org-string">"&#65295;(&#65381; &#215; &#65381;)&#65340;"</span>
           <span class="org-string">"&#65295;(^ x ^)&#65340;"</span>
           <span class="org-string">"&#65295;(^ x ^=)&#65340;"</span>
           <span class="org-string">"&#65295;(=&#3663; x &#3663;=)&#65340;"</span>
           <span class="org-string">"&#65295;(=&#180;x`=)&#65340;"</span>
           <span class="org-string">"&#65295;(=&#8757;=)&#65340;"</span>
           <span class="org-string">"&#65295;(=&#8978;x&#8978;=)&#65340;"</span>
           <span class="org-string">"&#65295;(=&#10026; x &#10026;=)&#65340;"</span>
           <span class="org-string">"&#65295;(&#8801;&#12539; x &#12539;&#8801;)&#65340;"</span>
           <span class="org-string">"&#65295;(&#8807; x &#8806;)&#65340;"</span>
           <span class="org-string">"&#65295;(v x v)&#65340;"</span>
           <span class="org-string">"&#65295;(=&#8757;=)&#65340;"</span>
           <span class="org-string">"&#65295;(&#8801;&#12539; x &#12539;&#8801;)&#65340;"</span>
           <span class="org-string">"/ (,,&#3663; &#8911; &#3663;,,)&#65340;"</span>
           <span class="org-string">"&#65295;(&#65515; x &#9685;=)&#65340;"</span>
           <span class="org-string">"&#65295;(&#9685; x &lt; )&#65340;"</span>
           <span class="org-string">"&#65295;(&#9685; x &#8806; )&#65340;"</span>
           <span class="org-string">"/ (&#12615;&#12613;&#12615;&#10048;)&#65340;"</span>
           <span class="org-string">"/ (&#8226;&#12613;&#8226;)&#65340;"</span>
           <span class="org-string">"/ (&#180;&#65381;&#215;&#65381;`)&#65340;"</span>
           <span class="org-string">"/ (,,&#336; &#65368; &#336;,,)&#65340;"</span>
           <span class="org-string">"/ (&#8270;&#707;&#4538;&#706;)&#65340;"</span>
           <span class="org-string">"/ (&#180;&#12539;&#215;&#12539;&#65344;)&#65340;"</span>
           <span class="org-string">"/ (&#9593;&#2757;&#215;&#9593;&#2757;)&#65340;"</span>
           <span class="org-string">"/ ( &#210;&#12613;&#211;)&#65340;"</span>
           <span class="org-string">"/ (&#8270;&#707;&#4538;&#706;)&#65340;"</span>
           <span class="org-string">"/ ( &#180;&#8226;&#805;&#215;&#8226;&#805;` )&#65340;"</span>)))
    (nth (random (length bunnies))
         bunnies)))
</code></pre>
</div>

<div id="outline-container-org1c2d3ac" class="outline-4">
<h4 id="org1c2d3ac"><span class="section-number-4">5.3.1</span> Insert a random bunny  Ôºè(‚â°„Éª x „Éª‚â°)Ôºº</h4>
<div class="outline-text-4" id="text-5-3-1">
<pre class="code"><code>(<span class="org-keyword">defun</span> <span class="org-function-name">emagician/insert-random-bunny</span> ()
  (<span class="org-keyword">interactive</span>)
  <span class="org-string">"Insert a random bunny."</span>
  (insert (emagician/random-bunny)))

(<span class="org-keyword">bind-key</span> <span class="org-string">"B"</span> 'emagician/insert-random-bunny emagician/meta-keymap)

</code></pre>
</div>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/thi-ng/org-spec">https://github.com/thi-ng/org-spec</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
The Greatest International Scavenger Hunt the World Has Ever Seen.  This is a yearly event with up to 10,000 people participating.  It lasts for a week long and participants are split into teams of ~13 people.  Some of the items are silly (go to the dentist and get dental work done while a string quartet performs), some are charitable (go to a nursing home and read to one of the residents while wearing a pirate costume).  More information on <a href="https://www.youtube.com/watch?v=SxeusMu7FuY">I'm Jonnay Season 9 Season 2 - TAZ</a>.
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Jonathan Arkell</p>
<p class="date">Created: 2018-05-18 Fri 10:31</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
